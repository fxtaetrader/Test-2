<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nexus Video Editing (Lite)</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>

  <header class="topbar">
    <div class="brand">
      <div class="logo">N</div>
      <div>
        <h1>Nexus Lite</h1>
        <p>Mobile Editor ‚Ä¢ GitHub Pages</p>
      </div>
    </div>

    <button id="exportBtn" class="primary" disabled>
      Export
    </button>
  </header>

  <!-- Preload status -->
  <section class="engine">
    <div class="engine-row">
      <span id="engineText">Engine: not loaded</span>
      <span id="enginePercent">0%</span>
    </div>
    <div class="bar">
      <div id="barFill" class="bar-fill"></div>
    </div>
  </section>

  <!-- Video preview -->
  <main class="previewWrap">
    <video id="video" controls></video>
  </main>

  <!-- Tools Panel -->
  <section class="panel" id="panel">
    <div class="panel-head">
      <h2 id="panelTitle">Upload</h2>
      <button id="closePanel" class="ghost">‚úï</button>
    </div>

    <!-- UPLOAD -->
    <div class="panel-body" data-panel="upload">
      <input id="videoInput" type="file" accept="video/*"/>
      <div class="note">
        Tip: If your tablet is slow, use videos under 2 minutes.
      </div>
    </div>

    <!-- TRIM -->
    <div class="panel-body hidden" data-panel="trim">
      <div class="field">
        <label>Trim Start (seconds)</label>
        <input id="trimStart" type="number" min="0" step="0.1" value="0"/>
      </div>

      <div class="field">
        <label>Trim End (seconds) (optional)</label>
        <input id="trimEnd" type="number" min="0" step="0.1" placeholder="leave empty"/>
      </div>
    </div>

    <!-- CROP -->
    <div class="panel-body hidden" data-panel="crop">
      <div class="field">
        <label>Aspect Ratio</label>
        <select id="ratio">
          <option value="original">Original</option>
          <option value="16:9">16:9 (YouTube)</option>
          <option value="9:16">9:16 (TikTok)</option>
          <option value="1:1">1:1 (Square)</option>
        </select>
      </div>
    </div>

    <!-- ENHANCE -->
    <div class="panel-body hidden" data-panel="enhance">
      <div class="toggleRow">
        <label class="switch">
          <input id="enhanceOn" type="checkbox"/>
          <span class="slider"></span>
        </label>
        <div>
          <div class="big">Auto Enhance</div>
          <div class="small">Sharpen + Contrast + Noise Reduce</div>
        </div>
      </div>

      <div class="note">
        Works on export. Gives clearer videos (less blur).
      </div>
    </div>

    <!-- FILTERS -->
    <div class="panel-body hidden" data-panel="filters">
      <div class="field">
        <label>Filter</label>
        <select id="filter">
          <option value="none">None</option>
          <option value="vivid">Vivid</option>
          <option value="cinema">Cinema</option>
          <option value="bw">B&W</option>
          <option value="warm">Warm</option>
          <option value="cool">Cool</option>
        </select>
      </div>
    </div>

    <!-- TEXT -->
    <div class="panel-body hidden" data-panel="text">
      <div class="field">
        <label>Text</label>
        <input id="text" type="text" placeholder="Type text (example: NEXUS)"/>
      </div>

      <div class="row">
        <div class="field">
          <label>X</label>
          <input id="textX" type="number" value="40"/>
        </div>

        <div class="field">
          <label>Y</label>
          <input id="textY" type="number" value="60"/>
        </div>

        <div class="field">
          <label>Size</label>
          <input id="textSize" type="number" value="44"/>
        </div>
      </div>
    </div>

    <!-- STICKER -->
    <div class="panel-body hidden" data-panel="sticker">
      <div class="field">
        <label>Upload Image</label>
        <input id="imageInput" type="file" accept="image/*"/>
      </div>

      <button id="removeBgBtn" class="secondary" disabled>
        Remove Background (Sticker)
      </button>

      <canvas id="stickerCanvas" class="canvas hidden"></canvas>

      <div class="row">
        <div class="field">
          <label>Sticker X</label>
          <input id="imgX" type="number" value="100"/>
        </div>

        <div class="field">
          <label>Sticker Y</label>
          <input id="imgY" type="number" value="100"/>
        </div>
      </div>

      <button id="downloadStickerBtn" class="ghostBtn hidden">
        Download Sticker PNG
      </button>

      <div class="note">
        Background remover is client-side. Best for clear subjects.
      </div>
    </div>

    <!-- VOICE -->
    <div class="panel-body hidden" data-panel="voice">
      <div class="field">
        <label>Voice Template</label>
        <select id="voice">
          <option value="none">None</option>
          <option value="robot">Robot</option>
          <option value="deep">Deep Male</option>
          <option value="chipmunk">Chipmunk</option>
          <option value="echo">Echo</option>
        </select>
      </div>

      <div class="note">
        Works if your video has audio. If no audio, export stays silent.
      </div>
    </div>

    <div id="status" class="status">Waiting...</div>
  </section>

  <!-- Bottom tool bar -->
  <nav class="tools">
    <button class="tool active" data-open="upload">üì§<span>Upload</span></button>
    <button class="tool" data-open="trim">‚úÇÔ∏è<span>Trim</span></button>
    <button class="tool" data-open="crop">üìê<span>Crop</span></button>
    <button class="tool" data-open="filters">üé®<span>Filter</span></button>
    <button class="tool" data-open="enhance">‚ú®<span>Enhance</span></button>
    <button class="tool" data-open="text">üî§<span>Text</span></button>
    <button class="tool" data-open="sticker">üñºÔ∏è<span>Sticker</span></button>
    <button class="tool" data-open="voice">üéôÔ∏è<span>Voice</span></button>
  </nav>

  <!-- FFmpeg.wasm -->
  <script src="https://unpkg.com/@ffmpeg/ffmpeg@0.12.10/dist/ffmpeg.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
